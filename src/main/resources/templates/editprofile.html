<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<meta charset="ISO-8859-1">
<title>Timetable</title>

<!-- Bootstrap CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Jquery CDN -->
<script src=https://code.jquery.com/jquery-3.6.0.min.js></script>

<!-- SweetAlert CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- FontAwesome CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">

<!-- Static files -->
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<script src="/js/userprofile.js"></script>
<script src="/js/logreg.js"></script>
<script src="/js/search.js"></script>


</head>
<body style="background-color: #F7F7F7;">
    <div th:replace="~{header :: header}"></div>

    <h3 style="color:#2C9447; margin: 30px 0px 30px 15px;">Edit Profile</h3>
    <!--EDIT USER HERE-->
    

        <div class="container1">
            <form id="userForm" method="put">
                <div class="card" style="width:45%; height: 350px; float:left; margin-left: 60px; padding:30px;" id="picard">
                    <div class="card-headers" style="color:#2C9447; font-weight: bold; margin-bottom: 15px;">PERSONAL INFORMATION</div>
                <div class="card-bodys">
                    <input type="hidden" id="userId" th:value="${user.id}">
                    <div class="mb-4">
                        <input class="form-control" id="editFname" type="text" placeholder="First Name" name="firstname" th:value="${user.fname}">
                    </div>
                    <div class="mb-4">
                        <input class="form-control" id="editLname" type="text" placeholder="Last Name" name="lastname" th:value="${user.lname}">
                    </div>
                    <div class="mb-4">
                        <input class="form-control" id="editAddress" type="text" placeholder="Home Address" name="address" th:value="${user.address}">
                    </div>
                    <div class="mb-4">
                        <input class="form-control" id="editContact" type="text" placeholder="Contact No." name="contactNo" th:value="${user.contact}">
                    </div>
                </div>
                </div>

                <div class="card" style="width:45%; height: 350px; float:right; margin-right: 60px; padding:30px;" id="aicard">
                    <div class="card-headers" style="color:#2C9447; font-weight: bold; margin-bottom: 15px;">ACCOUNT INFORMATION</div>
                <div class="card-bodys">    
                    <div class="mb-4">
                        <input class="form-control" id="editUsername" type="text" placeholder="Username" name="username" th:value="${user.username}">
                    </div>
                
                    
                    <div class="mb-5">
                        <input class="form-control" id="editEmail" type="email" placeholder="Email" name="email" th:value="${user.email}">
                    </div>
                    <span id="errMsg" style="color:red "></span><br>
                    <button type="button" class="btn btn-success btn-sm" id="changePassBtn">Change Password</button>
                    
                    <div style="float: right;">
                        <button type="submit" class="btn" style="background-color: #2C9447; color:white;">Save</button>
                    </div>
                </div>
                </div>
            </form>

            <form id="userpassForm">
                <div class="card" style="width:45%; height: 350px; float:left; margin-left: 60px; padding:30px;" id="passcard">
                    <div class="card-headers" style="color:#2C9447; font-weight: bold; margin-bottom: 15px;">PASSWORD</div>
                <div class="card-bodys">
                    <input type="hidden" id="passId" th:value="${user.id}">
                    <div class="mb-4">
                        <input class="form-control" type="password" placeholder="Old Password" name="oldpass" id="oldpass">
                    </div>
                    <div class="mb-4">
                        <input class="form-control" type="password" placeholder="New Password" name="password" id="newpass">
                    </div>
                    <div class="mb-4">
                        <input class="form-control" type="password" placeholder="Confirm Password" id="conpass" name="conpass">
                    </div>   
                    <span id="passerrMsg" style="color:red "></span>
                    <button type="button" class="btn btn-success btn-sm" id="cancelPassBtn">Cancel</button>
                    <button type="submit" class="btn btn-success btn-sm" id="savePassBtn">Save Password</button>
                </div>
                </div>
            </form>
            
        </div>

        <p th:text="${error}" th:if="${error}"></p>

        <br/><br/>
</body>
</html>